@startuml C4_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

title Diagrama de Contexto do Sistema - Plataforma AllpFit Analytics

Person(admin, "Usuário Admin", "Super admin da GeniAI que gerencia múltiplos tenants")
Person(client_admin, "Admin do Cliente", "Admin da AllpFit que gerencia analytics da sua organização")
Person(client_viewer, "Visualizador do Cliente", "Usuário AllpFit com acesso somente-leitura aos dashboards")

System(analytics_platform, "Plataforma AllpFit Analytics", "Sistema multi-tenant de analytics para análise de conversas do Chatwoot com insights baseados em IA")

System_Ext(chatwoot, "Sistema Chatwoot", "CRM externo com dados de conversas em banco PostgreSQL")
System_Ext(openai, "API OpenAI", "Serviço GPT-4 para análise de conversas e predição de conversões")
System_Ext(evo_crm, "EVO CRM", "Sistema CRM externo para dados de clientes e gestão de leads")

Rel(admin, analytics_platform, "Gerencia tenants, visualiza todos os dashboards", "HTTPS")
Rel(client_admin, analytics_platform, "Configura dashboards, gerencia usuários", "HTTPS")
Rel(client_viewer, analytics_platform, "Visualiza dashboards de analytics", "HTTPS")

Rel(analytics_platform, chatwoot, "Extrai dados de conversas via ETL incremental", "PostgreSQL/TLS")
Rel(analytics_platform, openai, "Analisa conversas, prevê conversões", "REST API/HTTPS")
Rel(analytics_platform, evo_crm, "Cross-match de telefones para tracking de conversões", "REST API/HTTPS")

SHOW_LEGEND()
@enduml